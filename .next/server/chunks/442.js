exports.id=442,exports.ids=[442],exports.modules={17279:(e,t,a)=>{let s={"08d25e6ee307efcee7e7b457c4063a5856b3aab3":()=>Promise.resolve().then(a.bind(a,81557)).then(e=>e.updatePageContent),"2e6028dd8be711b960f4ee7354136bb8e666cf6d":()=>Promise.resolve().then(a.bind(a,81557)).then(e=>e.seedPageContent),cda48e5fbaded337a53c48c3caf027d748127a49:()=>Promise.resolve().then(a.bind(a,81557)).then(e=>e.getPageContent),"3a4a64d30cf8a2b54caaf6c920a9a404abac5a52":()=>Promise.resolve().then(a.bind(a,18726)).then(e=>e.getPostBySlug),"43c503547db36b1bc903b96bcc9d10bd8c964a03":()=>Promise.resolve().then(a.bind(a,18726)).then(e=>e.updatePost),"57aeed66b64bebd82d7b74b9f3d62929c450544e":()=>Promise.resolve().then(a.bind(a,18726)).then(e=>e.deletePost),c572cf63742f2c5e77fbbaa42ec9372b04df91b3:()=>Promise.resolve().then(a.bind(a,18726)).then(e=>e.createPost),f97b4353edd2660cf53c949b9246ca7e422d58a5:()=>Promise.resolve().then(a.bind(a,18726)).then(e=>e.getPost),fa1464f9317c93f1633ada6e829a94f527c96323:()=>Promise.resolve().then(a.bind(a,18726)).then(e=>e.getPosts)};async function l(e,...t){return(await s[e]()).apply(null,t)}e.exports={"08d25e6ee307efcee7e7b457c4063a5856b3aab3":l.bind(null,"08d25e6ee307efcee7e7b457c4063a5856b3aab3"),"2e6028dd8be711b960f4ee7354136bb8e666cf6d":l.bind(null,"2e6028dd8be711b960f4ee7354136bb8e666cf6d"),cda48e5fbaded337a53c48c3caf027d748127a49:l.bind(null,"cda48e5fbaded337a53c48c3caf027d748127a49"),"3a4a64d30cf8a2b54caaf6c920a9a404abac5a52":l.bind(null,"3a4a64d30cf8a2b54caaf6c920a9a404abac5a52"),"43c503547db36b1bc903b96bcc9d10bd8c964a03":l.bind(null,"43c503547db36b1bc903b96bcc9d10bd8c964a03"),"57aeed66b64bebd82d7b74b9f3d62929c450544e":l.bind(null,"57aeed66b64bebd82d7b74b9f3d62929c450544e"),c572cf63742f2c5e77fbbaa42ec9372b04df91b3:l.bind(null,"c572cf63742f2c5e77fbbaa42ec9372b04df91b3"),f97b4353edd2660cf53c949b9246ca7e422d58a5:l.bind(null,"f97b4353edd2660cf53c949b9246ca7e422d58a5"),fa1464f9317c93f1633ada6e829a94f527c96323:l.bind(null,"fa1464f9317c93f1633ada6e829a94f527c96323")}},39312:(e,t,a)=>{let s={"0dfc18d0a786314f00b81027f19dbaf74ddbe5c1":()=>Promise.resolve().then(a.bind(a,96606)).then(e=>e.updateTagPresets),a58d85cb8f9da22909cb36974b0c660431b6fe98:()=>Promise.resolve().then(a.bind(a,96606)).then(e=>e.getTagPresets),d221600253345c81968a0a74a4d0638dccc83403:()=>Promise.resolve().then(a.bind(a,96606)).then(e=>e.getAllTagPresets)};async function l(e,...t){return(await s[e]()).apply(null,t)}e.exports={"0dfc18d0a786314f00b81027f19dbaf74ddbe5c1":l.bind(null,"0dfc18d0a786314f00b81027f19dbaf74ddbe5c1"),a58d85cb8f9da22909cb36974b0c660431b6fe98:l.bind(null,"a58d85cb8f9da22909cb36974b0c660431b6fe98"),d221600253345c81968a0a74a4d0638dccc83403:l.bind(null,"d221600253345c81968a0a74a4d0638dccc83403")}},42807:(e,t,a)=>{Promise.resolve().then(a.bind(a,81816))},42739:(e,t,a)=>{"use strict";a.d(t,{Z:()=>s});/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,a(69224).Z)("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},33733:(e,t,a)=>{"use strict";a.d(t,{Z:()=>s});/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,a(69224).Z)("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]])},14513:(e,t,a)=>{"use strict";a.d(t,{Z:()=>s});/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,a(69224).Z)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},53267:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return r}});let s=a(39694);a(95344),a(3729);let l=s._(a(60546));function r(e,t){let a={loading:e=>{let{error:t,isLoading:a,pastDelay:s}=e;return null}};return"function"==typeof e&&(a.loader=e),(0,l.default)({...a,...t})}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},38354:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"BailoutToCSR",{enumerable:!0,get:function(){return l}});let s=a(63689);function l(e){let{reason:t,children:a}=e;throw new s.BailoutToCSRError(t)}},60546:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return o}});let s=a(95344),l=a(3729),r=a(38354);function n(e){var t;return{default:null!=(t=null==e?void 0:e.default)?t:e}}let i={loader:()=>Promise.resolve(n(()=>null)),loading:null,ssr:!0},o=function(e){let t={...i,...e},a=(0,l.lazy)(()=>t.loader().then(n)),o=t.loading;function c(e){let n=o?(0,s.jsx)(o,{isLoading:!0,pastDelay:!0,error:null}):null,i=t.ssr?(0,s.jsx)(a,{...e}):(0,s.jsx)(r.BailoutToCSR,{reason:"next/dynamic",children:(0,s.jsx)(a,{...e})});return(0,s.jsx)(l.Suspense,{fallback:n,children:i})}return c.displayName="LoadableComponent",c}},81816:(e,t,a)=>{"use strict";let s,l;a.r(t),a.d(t,{PostForm:()=>A});var r=a(95344),n=a(53267),i=a.n(n),o=a(3729);a(65474);var c=a(42739),d=a(33733),u=a(14513),b=a(69224);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let f=(0,b.Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),m={ai:["AI","ChatGPT","LLM","Tutorial","News","Review","Productivity","Coding","Midjourney","Stable Diffusion"],"content-creation":["Writing","YouTube","Podcast","Marketing","Social Media","Branding","Storytelling"],blog:["Tech","Life","Thoughts","Coding","Guide"],default:["Update","News","Featured","Guide"]};function p({initialTags:e="",onChange:t,category:a="default",suggestions:s}){let[l,n]=(0,o.useState)([]),[i,c]=(0,o.useState)(""),d=s||m[a]||m.default;(0,o.useEffect)(()=>{e&&n(e.split(",").map(e=>e.trim()).filter(Boolean))},[e]);let b=e=>{let a=e.trim();if(a&&!l.includes(a)){let e=[...l,a];n(e),t(e.join(","))}c("")},p=e=>{let a=l.filter(t=>t!==e);n(a),t(a.join(","))};return(0,r.jsxs)("div",{className:"w-full space-y-3",children:[(0,r.jsxs)("div",{className:"flex flex-wrap gap-2 p-3 rounded-xl border border-slate-200 bg-white focus-within:ring-2 focus-within:ring-blue-500/20 focus-within:border-blue-500 transition-all min-h-[46px]",children:[l.map(e=>(0,r.jsxs)("span",{className:"flex items-center gap-1.5 px-2.5 py-1 text-sm font-medium bg-blue-50 text-blue-700 rounded-lg group animate-in fade-in zoom-in duration-200",children:[e,r.jsx("button",{type:"button",onClick:()=>p(e),className:"text-blue-400 hover:text-blue-600 hover:bg-blue-100 rounded-full p-0.5 transition-colors",children:r.jsx(u.Z,{className:"w-3.5 h-3.5"})})]},e)),r.jsx("input",{type:"text",value:i,onChange:e=>c(e.target.value),onKeyDown:e=>{"Enter"===e.key?(e.preventDefault(),b(i)):"Backspace"===e.key&&!i&&l.length>0&&p(l[l.length-1])},onBlur:()=>i&&b(i),className:"flex-1 min-w-[120px] outline-none bg-transparent text-sm py-1.5 px-1 placeholder:text-slate-400",placeholder:0===l.length?"输入标签后按回车...":""})]}),(0,r.jsxs)("div",{children:[r.jsx("div",{className:"text-xs font-medium text-slate-500 mb-2 px-1",children:"推荐标签 (点击添加):"}),r.jsx("div",{className:"flex flex-wrap gap-2",children:d.map(e=>{let t=l.includes(e);return(0,r.jsxs)("button",{type:"button",onClick:()=>!t&&b(e),disabled:t,className:`
                  flex items-center gap-1 px-3 py-1.5 rounded-lg text-xs font-medium transition-all border
                  ${t?"bg-slate-100 text-slate-400 border-slate-100 cursor-default":"bg-white text-slate-600 border-slate-200 hover:border-blue-300 hover:text-blue-600 hover:bg-blue-50 cursor-pointer shadow-sm"}
                `,children:[e,!t&&r.jsx(f,{className:"w-3 h-3 opacity-50"})]},e)})})]}),r.jsx("input",{type:"hidden",name:"tags",value:l.join(",")})]})}/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let h=(0,b.Z)("Settings2",[["path",{d:"M20 7h-9",key:"3s1dr2"}],["path",{d:"M14 17H5",key:"gfn3mx"}],["circle",{cx:"17",cy:"17",r:"3",key:"18b49y"}],["circle",{cx:"7",cy:"7",r:"3",key:"dfmy0x"}]]),g=(0,b.Z)("ArrowUp",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]),x=(0,b.Z)("ArrowDown",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]]);a(13664);var y=a(28371);(0,y.$)("d221600253345c81968a0a74a4d0638dccc83403");var v=(0,y.$)("a58d85cb8f9da22909cb36974b0c660431b6fe98"),j=(0,y.$)("0dfc18d0a786314f00b81027f19dbaf74ddbe5c1");function N({contextKey:e,onTagsChange:t}){let[a,s]=(0,o.useState)([]),[l,n]=(0,o.useState)(!0),[i,d]=(0,o.useState)(!1),[b,f]=(0,o.useState)(""),[m,p]=(0,o.useState)(!1);(0,o.useEffect)(()=>{let a=!0;return n(!0),v(e).then(e=>{a&&(s(e),n(!1),t?.(e))}),()=>{a=!1}},[e]);let y=async a=>{d(!0);try{await j(e,a),t?.(a)}catch(e){console.error("Failed to save tags",e),alert("保存标签失败")}finally{d(!1)}},N=async()=>{let e=b.trim();if(e&&!a.includes(e)){let t=[...a,e];s(t),f(""),await y(t)}},P=async e=>{if(!confirm(`确定要从预设中删除标签 "${e}" 吗？`))return;let t=a.filter(t=>t!==e);s(t),await y(t)},w=async(e,t)=>{if("up"===t&&0===e||"down"===t&&e===a.length-1)return;let l=[...a],r="up"===t?e-1:e+1,n=l[e];l[e]=l[r],l[r]=n,s(l),await y(l)};return l?(0,r.jsxs)("div",{className:"text-sm text-slate-400 flex items-center gap-2",children:[r.jsx(c.Z,{className:"w-3 h-3 animate-spin"})," 加载标签配置..."]}):(0,r.jsxs)("div",{className:"w-full",children:[(0,r.jsxs)("button",{type:"button",onClick:()=>p(!m),className:"text-xs flex items-center gap-1 text-slate-500 hover:text-blue-600 mb-2 transition-colors",children:[r.jsx(h,{className:"w-3 h-3"}),m?"收起标签管理":"管理预设标签 (排序/添加/删除)"]}),m&&(0,r.jsxs)("div",{className:"bg-slate-50 border border-slate-200 rounded-xl p-4 mb-4 animate-in slide-in-from-top-2 duration-200",children:[(0,r.jsxs)("div",{className:"flex gap-2 mb-4",children:[r.jsx("input",{value:b,onChange:e=>f(e.target.value),onKeyDown:e=>"Enter"===e.key&&(e.preventDefault(),N()),placeholder:"输入新标签...",className:"flex-1 px-3 py-1.5 text-sm rounded-lg border border-slate-200 focus:outline-none focus:ring-2 focus:ring-blue-500"}),r.jsx("button",{type:"button",onClick:N,disabled:i||!b.trim(),className:"px-3 py-1.5 bg-blue-600 text-white rounded-lg text-sm font-medium hover:bg-blue-700 disabled:opacity-50",children:"添加"})]}),(0,r.jsxs)("div",{className:"space-y-2 max-h-60 overflow-y-auto",children:[a.map((e,t)=>(0,r.jsxs)("div",{className:"flex items-center justify-between bg-white p-2 rounded-lg border border-slate-100 shadow-sm group",children:[r.jsx("span",{className:"text-sm font-medium text-slate-700",children:e}),(0,r.jsxs)("div",{className:"flex items-center gap-1 opacity-60 group-hover:opacity-100 transition-opacity",children:[r.jsx("button",{type:"button",onClick:()=>w(t,"up"),disabled:0===t||i,className:"p-1 hover:bg-slate-100 rounded text-slate-500 disabled:opacity-30",title:"上移",children:r.jsx(g,{className:"w-3 h-3"})}),r.jsx("button",{type:"button",onClick:()=>w(t,"down"),disabled:t===a.length-1||i,className:"p-1 hover:bg-slate-100 rounded text-slate-500 disabled:opacity-30",title:"下移",children:r.jsx(x,{className:"w-3 h-3"})}),r.jsx("div",{className:"w-px h-3 bg-slate-200 mx-1"}),r.jsx("button",{type:"button",onClick:()=>P(e),disabled:i,className:"p-1 hover:bg-red-50 text-slate-400 hover:text-red-500 rounded transition-colors",title:"删除",children:r.jsx(u.Z,{className:"w-3 h-3"})})]})]},e)),0===a.length&&r.jsx("div",{className:"text-center text-xs text-slate-400 py-4",children:"暂无预设标签"})]}),i&&(0,r.jsxs)("div",{className:"text-xs text-blue-600 mt-2 flex items-center gap-1",children:[r.jsx(c.Z,{className:"w-3 h-3 animate-spin"})," 保存中..."]})]})]})}var P=a(6113);let w=e=>{!s||s.length<e?(s=Buffer.allocUnsafe(128*e),P.randomFillSync(s),l=0):l+e>s.length&&(P.randomFillSync(s),l=0),l+=e},C=(e=21)=>{w(e|=0);let t="";for(let a=l-e;a<l;a++)t+="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict"[63&s[a]];return t};var k=a(41472);let S=i()(async()=>{},{loadableGenerated:{modules:["/Users/abobo/Desktop/geminiai/hero/src/components/admin/PostForm.tsx -> react-simplemde-editor"]},ssr:!1});function A({action:e,initialData:t,isEditing:a,defaultType:s,defaultCategory:l,defaultResourceType:n}){let[i,u]=(0,o.useState)(t?.content||""),[b,f]=(0,o.useState)(t?.title||""),[m,h]=(0,o.useState)(t?.description||""),[g,x]=(0,o.useState)(t?.slug||""),[y,v]=(0,o.useState)(!1),[j,P]=(0,o.useState)(!1),[w,A]=(0,o.useState)(t?.type||s||k.A2.BLOG),[T,O]=(0,o.useState)(t?.category||l||k.aA.AI),[E,I]=(0,o.useState)(t?.resourceType||n||k.Uk.ARTICLE),[R,U]=(0,o.useState)(t?.tags||""),[L,_]=(0,o.useState)(t?.link||""),[M,F]=(0,o.useState)(t?.author||""),[$,B]=(0,o.useState)(t?.duration||""),[D,Z]=(0,o.useState)(t?.coverImage||""),[G,q]=(0,o.useState)([]),V=(()=>{if(w===k.A2.BLOG)return"blog:default";if(w===k.A2.RESOURCE){let e=T||k.aA.AI,t=E||k.Uk.ARTICLE;return`resource:${e}:${t}`}return"default"})();(0,o.useEffect)(()=>{if(i){if(!b){let e=i.split("\n"),t=e[0].replace(/^#+\s*/,"").trim();if(t&&t.length<50&&(f(t),e[0].replace(/^#+\s*/,"").trim()===t)){let t=e.slice(1).join("\n").trim();t!==i&&u(t)}}if(!m){let e=i.replace(/!\[.*?\]\(.*?\)/g,"").replace(/\[.*?\]\(.*?\)/g,"$1").replace(/#{1,6}\s/g,"").replace(/(\*\*|__)(.*?)\1/g,"$2").replace(/(\*|_)(.*?)\1/g,"$2").replace(/`{1,3}.*?`{1,3}/g,"").split("\n").map(e=>e.trim()).filter(e=>e.length>0)[0]||"";if(e){let t=e.match(/.*?[。！？.!?]/),a=t?t[0]:e;a.length>30&&(a=a.slice(0,30)+"..."),h(a)}}}},[i]);let J=async()=>{if(L){P(!0);try{let e=await fetch("/api/parse-url",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({url:L})});if(!e.ok)throw Error("Failed to parse");let t=await e.json();t.title&&f(t.title),t.description&&h(t.description),t.author&&F(t.author),t.duration&&B(t.duration),t.coverImage&&Z(t.coverImage),t.tags&&Array.isArray(t.tags)&&t.tags.length>0&&U(t.tags.join(", "))}catch(e){console.error(e),alert("解析失败，请手动输入")}finally{P(!1)}}},z=async t=>{v(!0),t.append("content",i),t.set("title",b),t.set("description",m),t.set("slug",g),t.set("tags",R),t.set("link",L),t.set("author",M),t.set("duration",$),D&&t.set("coverImage",D),w!==k.A2.BLOG||t.get("category")||l||t.set("category","blog"),await e(t),v(!1)};return(0,r.jsxs)("form",{action:z,className:"space-y-8 max-w-5xl",children:[(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(w===k.A2.RESOURCE||s===k.A2.RESOURCE)&&(0,r.jsxs)("div",{className:"space-y-2 md:col-span-2",children:[r.jsx("label",{className:"text-sm font-medium text-slate-700",children:"资源链接"}),(0,r.jsxs)("div",{className:"flex gap-2",children:[r.jsx("input",{name:"link",value:L,onChange:e=>_(e.target.value),className:"flex-1 px-4 py-2 rounded-lg border border-slate-200 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"粘贴 YouTube 视频链接或其他 URL"}),(0,r.jsxs)("button",{type:"button",onClick:J,disabled:j||!L,className:"px-4 py-2 bg-blue-50 text-blue-600 rounded-lg hover:bg-blue-100 font-medium disabled:opacity-50 flex items-center gap-2",children:[j?r.jsx(c.Z,{className:"w-4 h-4 animate-spin"}):r.jsx(d.Z,{className:"w-4 h-4"}),"解析"]})]}),r.jsx("p",{className:"text-xs text-slate-500",children:"点击解析可自动获取标题和描述"})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsxs)("label",{className:"text-sm font-medium text-slate-700",children:["标题 ",w!==k.A2.RESOURCE&&"(可自动生成)"]}),r.jsx("input",{name:"title",value:b,onChange:e=>f(e.target.value),required:!0,className:"w-full px-4 py-2 rounded-lg border border-slate-200 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"输入标题或粘贴正文自动生成"})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsxs)("label",{className:"text-sm font-medium text-slate-700 flex items-center justify-between",children:[r.jsx("span",{children:"Slug (URL 路径)"}),(0,r.jsxs)("button",{type:"button",onClick:()=>{x(C(10))},className:"text-xs text-blue-600 hover:text-blue-800 flex items-center gap-1",children:[r.jsx(d.Z,{className:"w-3 h-3"})," 随机生成"]})]}),r.jsx("input",{name:"slug",value:g,onChange:e=>x(e.target.value),className:"w-full px-4 py-2 rounded-lg border border-slate-200 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"留空则自动生成随机 ID"})]}),s&&r.jsx("input",{type:"hidden",name:"type",value:s}),l&&r.jsx("input",{type:"hidden",name:"category",value:l}),n&&r.jsx("input",{type:"hidden",name:"resourceType",value:n}),!s&&(0,r.jsxs)("div",{className:"space-y-2",children:[r.jsx("label",{className:"text-sm font-medium text-slate-700",children:"类型"}),(0,r.jsxs)("select",{name:"type",value:w,onChange:e=>A(e.target.value),className:"w-full px-4 py-2 rounded-lg border border-slate-200 focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white",children:[r.jsx("option",{value:k.A2.BLOG,children:"博客 (Blog)"}),r.jsx("option",{value:k.A2.RESOURCE,children:"资源 (Resource)"})]})]}),!l&&w!==k.A2.BLOG&&(0,r.jsxs)("div",{className:"space-y-2",children:[r.jsx("label",{className:"text-sm font-medium text-slate-700",children:"分类"}),(0,r.jsxs)("select",{name:"category",value:T,onChange:e=>O(e.target.value),required:!0,className:"w-full px-4 py-2 rounded-lg border border-slate-200 focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white",children:[r.jsx("option",{value:k.aA.AI,children:"AI 学习资源 (AI)"}),r.jsx("option",{value:k.aA.CONTENT_CREATION,children:"内容创作与 IP (Content & IP)"})]})]}),(w===k.A2.RESOURCE||s===k.A2.RESOURCE)&&(0,r.jsxs)(r.Fragment,{children:[!n&&(0,r.jsxs)("div",{className:"space-y-2",children:[r.jsx("label",{className:"text-sm font-medium text-slate-700",children:"资源类型"}),(0,r.jsxs)("select",{name:"resourceType",value:E,onChange:e=>I(e.target.value),className:"w-full px-4 py-2 rounded-lg border border-slate-200 focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white",children:[r.jsx("option",{value:k.Uk.ARTICLE,children:"精选文章 (Article)"}),r.jsx("option",{value:k.Uk.VIDEO,children:"视频链接 (Video)"}),r.jsx("option",{value:k.Uk.PODCAST,children:"精选播客 (Podcast)"}),r.jsx("option",{value:k.Uk.TOOL,children:"AI 产品/工具 (Tool)"})]})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[r.jsx("label",{className:"text-sm font-medium text-slate-700",children:"外部链接 (可选)"}),r.jsx("input",{name:"link_display_only",value:L,disabled:!0,className:"w-full px-4 py-2 rounded-lg border border-slate-200 bg-slate-50 text-slate-500 focus:outline-none",placeholder:"请在上方解析处输入"})]})]}),(0,r.jsxs)("div",{className:"space-y-2 md:col-span-2",children:[r.jsx("label",{className:"text-sm font-medium text-slate-700",children:"描述 (可自动生成)"}),r.jsx("textarea",{name:"description",value:m,onChange:e=>h(e.target.value),rows:2,className:"w-full px-4 py-2 rounded-lg border border-slate-200 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"简短描述，用于 SEO 和卡片展示 (粘贴正文可自动生成)"})]}),(0,r.jsxs)("div",{className:"space-y-2 md:col-span-2",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[r.jsx("label",{className:"text-sm font-medium text-slate-700",children:"标签"}),r.jsx(N,{contextKey:V,onTagsChange:q})]}),r.jsx(p,{initialTags:R,onChange:U,category:T,suggestions:G.length>0?G:void 0})]}),("resource"===w||"resource"===s)&&(0,r.jsxs)("div",{className:"flex gap-4",children:[(0,r.jsxs)("div",{className:"space-y-2 flex-1",children:[r.jsx("label",{className:"text-sm font-medium text-slate-700",children:"原作者/来源"}),r.jsx("input",{name:"author",value:M,onChange:e=>F(e.target.value),className:"w-full px-4 py-2 rounded-lg border border-slate-200 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"例如: YouTube Channel Name"})]}),E===k.Uk.VIDEO&&(0,r.jsxs)("div",{className:"space-y-2 w-1/3",children:[r.jsx("label",{className:"text-sm font-medium text-slate-700",children:"视频时长"}),r.jsx("input",{name:"duration",value:$,onChange:e=>B(e.target.value),className:"w-full px-4 py-2 rounded-lg border border-slate-200 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"例如: 12:34"})]})]}),("resource"===w||"resource"===s)&&r.jsx("input",{type:"hidden",name:"coverImage",value:D})]}),w!==k.A2.RESOURCE&&s!==k.A2.RESOURCE&&(0,r.jsxs)("div",{className:"space-y-2 prose prose-slate max-w-none",children:[r.jsx("label",{className:"text-sm font-medium text-slate-700 block",children:"正文 (Markdown)"}),r.jsx(S,{value:i,onChange:u})]}),(0,r.jsxs)("div",{className:"flex justify-end gap-4 pt-4 border-t border-slate-100",children:[r.jsx("button",{type:"button",onClick:()=>window.history.back(),className:"px-6 py-2 rounded-lg border border-slate-200 text-slate-600 hover:bg-slate-50 font-medium",children:"取消"}),(0,r.jsxs)("button",{type:"submit",disabled:y,className:"px-6 py-2 rounded-lg bg-slate-900 text-white hover:bg-slate-800 font-medium disabled:opacity-50 flex items-center",children:[y&&r.jsx(c.Z,{className:"w-4 h-4 mr-2 animate-spin"}),a?"更新":"创建"]})]})]})}},41472:(e,t,a)=>{"use strict";a.d(t,{A2:()=>s,Hs:()=>n,Uk:()=>r,aA:()=>l});let s={BLOG:"blog",RESOURCE:"resource"},l={AI:"ai",CONTENT_CREATION:"content-creation",ALL:"all"},r={ARTICLE:"article",VIDEO:"video",PODCAST:"podcast",TOOL:"tool"},n={[l.ALL]:"全部资源",[l.AI]:"AI 学习资源",[l.CONTENT_CREATION]:"内容 & IP"};r.ARTICLE,r.VIDEO,r.PODCAST,r.TOOL},18726:(e,t,a)=>{"use strict";a.r(t),a.d(t,{createPost:()=>u,deletePost:()=>f,getPost:()=>c,getPostBySlug:()=>d,getPosts:()=>o,updatePost:()=>b});var s=a(74471);a(68616);var l=a(34490),r=a(66864),n=a(867),i=a(70996);async function o(){try{return await l._.post.findMany({orderBy:{date:"desc"}})}catch(e){return[]}}async function c(e){try{return await l._.post.findUnique({where:{id:e}})}catch(e){return console.error("Failed to fetch post by id:",e),null}}async function d(e){try{return await l._.post.findUnique({where:{slug:e}})}catch(e){return console.error("Failed to fetch post by slug:",e),null}}async function u(e){let t=e.get("title"),a=e.get("slug"),s=e.get("content"),o=e.get("description"),c=e.get("type"),d=e.get("category"),u=e.get("tags"),b=e.get("link"),f=e.get("resourceType"),m=e.get("author"),p=e.get("duration"),h=e.get("coverImage");a&&""!==a.trim()||(a=(0,i.x0)(10)),await l._.post.create({data:{title:t,slug:a,content:s,description:o,type:c,category:d,tags:u,link:b||null,resourceType:f||null,author:m||null,duration:p||null,coverImage:h||null,date:new Date}}),(0,r.revalidatePath)("/admin/content"),(0,r.revalidatePath)("/admin/blog"),(0,r.revalidatePath)("/admin/resources/ai/video"),(0,r.revalidatePath)("/admin/resources/ai/podcast"),(0,r.revalidatePath)("/admin/resources/ai/tool"),(0,r.revalidatePath)("/admin/resources/content-creation/video"),(0,r.revalidatePath)("/admin/resources/content-creation/podcast"),(0,r.revalidatePath)("/admin/resources/content-creation/article"),(0,r.revalidatePath)("/blog"),(0,r.revalidatePath)("/resources"),(0,r.revalidatePath)(`/blog/${a}`),(0,r.revalidatePath)(`/resources/${d}/${a}`),"blog"===c?(0,n.redirect)("/admin/blog"):"ai"===d?(0,n.redirect)(`/admin/resources/ai/${f||"article"}`):"content-creation"===d?(0,n.redirect)(`/admin/resources/content-creation/${f||"article"}`):(0,n.redirect)("/admin")}async function b(e,t){let a=t.get("title"),s=t.get("slug"),o=t.get("content"),c=t.get("description"),d=t.get("type"),u=t.get("category"),b=t.get("tags"),f=t.get("link"),m=t.get("resourceType"),p=t.get("author"),h=t.get("duration"),g=t.get("coverImage");s&&""!==s.trim()||(s=(0,i.x0)(10)),await l._.post.update({where:{id:e},data:{title:a,slug:s,content:o,description:c,type:d,category:u,tags:b,link:f||null,resourceType:m||null,author:p||null,duration:h||null,coverImage:g||null}}),(0,r.revalidatePath)("/admin/content"),(0,r.revalidatePath)("/admin/blog"),(0,r.revalidatePath)(`/admin/content/${e}`),(0,r.revalidatePath)("/admin/resources/ai/video"),(0,r.revalidatePath)("/admin/resources/ai/podcast"),(0,r.revalidatePath)("/admin/resources/ai/tool"),(0,r.revalidatePath)("/admin/resources/content-creation/video"),(0,r.revalidatePath)("/admin/resources/content-creation/podcast"),(0,r.revalidatePath)("/admin/resources/content-creation/article"),(0,r.revalidatePath)("/blog"),(0,r.revalidatePath)("/resources"),(0,r.revalidatePath)(`/blog/${s}`),(0,r.revalidatePath)(`/resources/${u}/${s}`),"blog"===d?(0,n.redirect)("/admin/blog"):"ai"===u?(0,n.redirect)(`/admin/resources/ai/${m||"article"}`):"content-creation"===u?(0,n.redirect)(`/admin/resources/content-creation/${m||"article"}`):(0,n.redirect)("/admin")}async function f(e){await l._.post.delete({where:{id:e}}),(0,r.revalidatePath)("/admin/content")}(0,a(42053).h)([o,c,d,u,b,f]),(0,s.U)("fa1464f9317c93f1633ada6e829a94f527c96323",o),(0,s.U)("f97b4353edd2660cf53c949b9246ca7e422d58a5",c),(0,s.U)("3a4a64d30cf8a2b54caaf6c920a9a404abac5a52",d),(0,s.U)("c572cf63742f2c5e77fbbaa42ec9372b04df91b3",u),(0,s.U)("43c503547db36b1bc903b96bcc9d10bd8c964a03",b),(0,s.U)("57aeed66b64bebd82d7b74b9f3d62929c450544e",f)},96606:(e,t,a)=>{"use strict";a.r(t),a.d(t,{getAllTagPresets:()=>d,getTagPresets:()=>o,updateTagPresets:()=>c});var s=a(98601);a(75811);var l=a(43811),r=a(57249),n=a(46893);let i={"resource:ai:video":["基础知识","提示词","实用教程","Vibe Coding","AI 产品","创始人访谈"],"resource:content-creation:video":["写作","内容创作","小而美商业","轻创业","个人品牌","运营策略"],"blog:default":["Tech","Life","Thoughts","Coding","Guide"]};async function o(e){try{let t=await r.prisma.tagPreset.findUnique({where:{key:e}});if(t)return JSON.parse(t.tags);return i[e]||[]}catch(t){return console.error("Failed to get tag presets:",t),i[e]||[]}}async function c(e,t){try{await r.prisma.tagPreset.upsert({where:{key:e},update:{tags:JSON.stringify(t)},create:{key:e,tags:JSON.stringify(t)}}),(0,l.revalidatePath)("/admin"),(0,l.revalidatePath)("/resources")}catch(e){throw console.error("Failed to update tag presets:",e),Error("Failed to update tags")}}async function d(){try{let e=await r.prisma.tagPreset.findMany(),t={...i};return e.forEach(e=>{try{t[e.key]=JSON.parse(e.tags)}catch(t){console.error(`Failed to parse tags for key ${e.key}`,t)}}),t}catch(e){return console.error("Failed to get all tag presets:",e),i}}(0,n.ensureServerEntryExports)([o,c,d]),(0,s.createActionProxy)("a58d85cb8f9da22909cb36974b0c660431b6fe98",o),(0,s.createActionProxy)("0dfc18d0a786314f00b81027f19dbaf74ddbe5c1",c),(0,s.createActionProxy)("d221600253345c81968a0a74a4d0638dccc83403",d)},73947:(e,t,a)=>{"use strict";a.d(t,{s:()=>i});var s=a(86843);let l=(0,s.createProxy)(String.raw`/Users/abobo/Desktop/geminiai/hero/src/components/admin/PostForm.tsx`),{__esModule:r,$$typeof:n}=l;l.default;let i=(0,s.createProxy)(String.raw`/Users/abobo/Desktop/geminiai/hero/src/components/admin/PostForm.tsx#PostForm`)},57249:(e,t,a)=>{"use strict";a.d(t,{prisma:()=>l});var s=a(53524);let l=globalThis.prisma??new s.PrismaClient},65474:()=>{},70996:(e,t,a)=>{"use strict";let s,l;a.d(t,{x0:()=>i});var r=a(6113);let n=e=>{!s||s.length<e?(s=Buffer.allocUnsafe(128*e),r.randomFillSync(s),l=0):l+e>s.length&&(r.randomFillSync(s),l=0),l+=e},i=(e=21)=>{n(e|=0);let t="";for(let a=l-e;a<l;a++)t+="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict"[63&s[a]];return t}}};